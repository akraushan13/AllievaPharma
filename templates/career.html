{% extends "base.html" %}
{% load static %}
{% load split_line %}
{% load widget_tweaks %}
{% block title %}Career{% endblock title %}

{% block body %}


    <!-- Hero Section -->
    <!-- <section class="py-5" style="background-image: url('{% static 'images/background/1709723307145.jpeg' %}'), no-repeat center center; background-size: cover; color: white;">
        <div class="container py-5 text-center">
            <h1 class="display-4 fw-bold mb-4">Build Your Career in Allieva Pharma</h1>
            <p class="lead mb-5" style="max-width: 800px; margin: 0 auto;">Join Allieva Pharma - A leader in innovative pharmaceutical solutions dedicated to improving global healthcare.</p>
            <a href="#open-positions" class="btn btn-lg" style="background-color: #e74c3c; color: white;">View Open Positions</a>
        </div>
    </section> -->

    <section>
        <div class="py-3 text-center abb-box">
            <h1 class="display-4 fw-bold m-4" style="color:white;">Build Your Career in Allieva Pharma</h1>
            <p class="lead mb-3 text-white" style="max-width: 800px; margin: 0 auto;">Join Allieva Pharma - A leader in innovative pharmaceutical solutions dedicated to improving global healthcare.</p>
            <a href="#open-positions" class="btn btn-lg fast-bttn">View Open Positions</a>
        </div>
    </section>

    <!-- Why Join Us Section -->
    <section class="py-5" style="background-color: #f8f9fa;">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold" style="color: #1B00A0;">Why Join Allieva Pharma?</h2>
                <div class="border-top border-primary w-25 mx-auto my-3"></div>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4 rot">
                            <div class="mb-4 rota" style="font-size: 2.5rem; color: #1B00A0;">
                                <i class="fas fa-flask"></i>
                            </div>
                            <h5 class="card-title" style="color: #1B00A0;">Innovative Research</h5>
                            <p class="card-text">Work with cutting-edge technology in our state-of-the-art research facilities.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4 rot">
                            <div class="mb-4 rota" style="font-size: 2.5rem; color: #1B00A0;">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <h5 class="card-title" style="color: #1B00A0;">Career Growth</h5>
                            <p class="card-text">Comprehensive training programs and clear advancement pathways.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 ">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4 rot">
                            <div class="mb-4 rota" style="font-size: 2.5rem; color: #1B00A0;">
                                <i class="fas fa-hand-holding-heart"></i>
                            </div>
                            <h5 class="card-title" style="color: #1B00A0;">Positive Impact</h5>
                            <p class="card-text">Contribute to meaningful work that improves lives globally.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Open Positions Section -->
    <section id="open-positions" class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold" style="color: #1B00A0;">Current Job Openings</h2>
                <div class="border-top border-primary w-25 mx-auto my-3"></div>
                <p>Join our team of professionals dedicated to pharmaceutical excellence.</p>
            </div>
            
          {% if jobs %}
          {% for job in jobs %}
          
            <div class="accordion" id="jobsAccordion">
                <!-- Job 1 -->
                <div class="accordion-item mb-3 border-0 shadow-sm urgent">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed py-3" type="button" data-bs-toggle="collapse" data-bs-target="#job1" style="background-color: #f8f9fa;">
                            <div class="d-flex justify-content-between align-items-center w-100 pe-3">
                                <div>
                                    <h5 class="mb-0" style="color: #1a5276;">{{job.title}}</h5>
                                    <div class="d-flex flex-wrap mt-1">
                                      {% for tag in job.tags.all %}
                                        <span class="badge me-2 mb-1" style="background-color: #1B00A0;">{{ tag.name }}</span>
                                      {% endfor %}
                                        <span class="badge me-2 mb-1" style="background-color: #1B00A0;">{{job.location}}</span>
<!--                                        <span class="badge me-2 mb-1" style="background-color: #1B00A0;">PhD Required</span>-->
                                    </div>
                                </div>
                                <span class="text-muted mt-2">Posted On {{ job.posted_on}}</span>
                            </div>
                        </button>
                    </h2>
                    <div id="job1" class="accordion-collapse collapse" data-bs-parent="#jobsAccordion">
                        <div class="accordion-body">
                            <h6>Job Description:</h6>
                          <ul>
                          {% for line in job.job_description|splitlines %}
                            <li>{{ line }}</li>
                            {% endfor %}
                            </ul>
                            <h6 class="mt-4">Responsibilities:</h6>
                            <ul>
                              {% for line in job.responsibilities|splitlines %}
                              <li>{{ line }}</li>
                              {% endfor %}
                            </ul>
                            
                            <h6 class="mt-4">Requirements:</h6>
                            <ul>
                                {% for line in job.requirements|splitlines %}
                                <li>{{ line }}</li>
                                {% empty %}
                                <li>No responsibilities listed.</li>
                                {% endfor %}
                                </ul>
                            
                           <button class="btn mt-3 fast-bttn"
                                   data-bs-toggle="modal"
                                   data-bs-target="#applyModal"
                                   data-job-id="{{ job.id }}"
                                   data-job-title="{{ job.title }}">
                                    Apply Now
                           </button>
                        </div>
                    </div>
                    <div class="urgent-chan">
                        <span>ðŸ”¥{{job.urgent}}</span>
                    </div>
                </div>
              
              {% endfor %}
              {% endif %}
            </div>
        </div>
    </section>

    <!-- Employee Testimonials -->
    <section class="py-5" style="background-color: #000254; color: white;">
        <div class="container">
            <div class="text-center mb-5 text-white">
                <h2 class="fw-bold title" style="color:white;">Hear From Our Team</h2>
                <div class="border-top border-light w-25 mx-auto my-3 "></div>
                <p class="text-white" >Meet some of the talented professionals shaping the future at Allieva Pharma</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0" style="background-color: rgba(255,255,255,0.1);">
                        <div class="card-body p-4 text-white teeam">
                            <div class="mb-4 text-center">
                                <img src="https://placehold.co/120x120" alt="Portrait of Dr. Priya Sharma, Senior Research Scientist at Allieva Pharma with short black hair and white lab coat" class="rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                            </div>
                            <div class="text-center mb-3">
                                <h5 class="mb-0">Dr. Priya Sharma</h5>
                                <small>Senior Research Scientist</small>
                                <div class="mt-2">
                                    <span class="star-rating" style="color: gold;">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </span>
                                </div>
                            </div>
                            <p class="card-text text-white">"Working at Allieva Pharma has given me the opportunity to work on truly innovative projects. The collaborative environment and access to cutting-edge technology make this an exciting place for research."</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card h-100 border-0" style="background-color: rgba(255,255,255,0.1);">
                        <div class="card-body p-4 teeam">
                            <div class="mb-4 text-center">
                                <img src="https://placehold.co/120x120" alt="Portrait of Arjun Patel, Quality Control Analyst at Allieva Pharma wearing safety glasses in lab setting" class="rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                            </div>
                            <div class="text-center mb-3">
                                <h5 class="mb-0">Arjun Patel</h5>
                                <small>Quality Control Analyst</small>
                                <div class="mt-2">
                                    <span class="star-rating" style="color: gold;">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </span>
                                </div>
                            </div>
                            <p class="card-text text-white">"The emphasis on quality at Allieva Pharma is exceptional. I've grown tremendously in my role through their training programs and mentorship opportunities. It's rewarding to work for a company that values both product quality and employee development."</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card h-100 border-0" style="background-color: rgba(255,255,255,0.1);">
                        <div class="card-body p-4 teeam">
                            <div class="mb-4 text-center">
                                <img src="https://placehold.co/120x120" alt="Portrait of Neha Gupta, Regional Sales Manager at Allieva Pharma in business attire smiling professionally" class="rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                            </div>
                            <div class="text-center mb-3">
                                <h5 class="mb-0">Neha Gupta</h5>
                                <small>Regional Sales Manager</small>
                                <div class="mt-2">
                                    <span class="star-rating" style="color: gold;">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </span>
                                </div>
                            </div>
                            <p class="card-text text-white pb-4">"From sales representative to regional manager, Allieva Pharma has supported my career growth every step of the way. The company culture fosters ambition while maintaining strong ethical values - a perfect balance for anyone looking to build a career in pharma."</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Application Form Modal -->
    <button class="btn mt-3 fast-bttn"
        data-bs-toggle="modal"
        data-bs-target="#applyModal"
        data-job-id="{{ job.id }}"
        data-job-title="{{ job.title }}">
  Apply Now
</button>

<div class="modal fade" id="applyModal" tabindex="-1" aria-labelledby="applyModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #1a5276; color: white;">
        <h5 class="modal-title" id="applyModalLabel">Application Form</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
<form method="post" enctype="multipart/form-data" id="jobApplicationForm" class="needs-validation" novalidate>
          {% csrf_token %}
          {{ form.job }} <!-- hidden field -->

          <!-- Job Position -->
          <div class="alert alert-info py-2 mb-4" id="positionAppliedBox" style="display:none;">
            <strong>Position Applied For:</strong> <span id="jobTitleText"></span>
          </div>

          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label fw-semibold">{{ form.first_name.label }}</label>
              {{ form.first_name|add_class:"form-control form-control-lg shadow-sm" }}
            </div>
            <div class="col-md-6">
              <label class="form-label fw-semibold">{{ form.last_name.label }}</label>
              {{ form.last_name|add_class:"form-control form-control-lg shadow-sm" }}
            </div>
          </div>

          <div class="mt-3">
            <label class="form-label fw-semibold">{{ form.email.label }}</label>
            {{ form.email|add_class:"form-control form-control-lg shadow-sm" }}
          </div>

          <div class="mt-3">
            <label class="form-label fw-semibold">{{ form.phone.label }}</label>
            {{ form.phone|add_class:"form-control form-control-lg shadow-sm" }}
          </div>

          <div class="mt-3">
            <label class="form-label fw-semibold">{{ form.resume.label }}</label>
            {{ form.resume|add_class:"form-control shadow-sm" }}
            <small class="text-muted">Accepted formats: PDF, DOC, DOCX</small>
          </div>

          <div class="mt-3">
            <label class="form-label fw-semibold">{{ form.cover_letter.label }}</label>
            {{ form.cover_letter|add_class:"form-control shadow-sm" }}
          </div>

          <div class="form-check mt-4">
            {{ form.consent|add_class:"form-check-input" }}
            <label class="form-check-label text-muted">{{ form.consent.label }}</label>
          </div>
        </form>      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" form="jobApplicationForm" class="btn" style="background-color: #e74c3c; color: white;">
          Submit Application
        </button>
      </div>
    </div>
  </div>
</div>



    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
<!--    <script>-->
<!--        // Set job title in application form when clicking Apply button-->
<!--        document.addEventListener('DOMContentLoaded', function() {-->
<!--            var applyModal = document.getElementById('applyModal');-->
<!--            if (applyModal) {-->
<!--                applyModal.addEventListener('show.bs.modal', function(event) {-->
<!--                    var button = event.relatedTarget;-->
<!--                    var jobTitle = button.getAttribute('data-job');-->
<!--                    var modalTitle = applyModal.querySelector('#positionApplied');-->
<!--                    modalTitle.value = jobTitle;-->
<!--                });-->
<!--            }-->
<!--            -->
<!--            // Handle form submission-->
<!--            var jobForm = document.getElementById('jobApplicationForm');-->
<!--            if (jobForm) {-->
<!--                jobForm.addEventListener('submit', function(e) {-->
<!--                    e.preventDefault();-->
<!--                    alert('Thank you for your application! We will review your information and contact you soon.');-->
<!--                    var modal = bootstrap.Modal.getInstance(applyModal);-->
<!--                    modal.hide();-->
<!--                    jobForm.reset();-->
<!--                });-->
<!--            }-->
<!--        });-->
<!--    </script>-->


<script>
document.addEventListener('DOMContentLoaded', function() {
    var applyModal = document.getElementById('applyModal');
    if (applyModal) {
        applyModal.addEventListener('show.bs.modal', function(event) {
            var button = event.relatedTarget;
            var jobId = button.getAttribute('data-job-id');
            var jobTitle = button.getAttribute('data-job-title');

            // Fill hidden job id
            var jobField = document.querySelector('#jobApplicationForm input[name="job"]');
            jobField.value = jobId;

            // Set modal title
            document.querySelector('#positionApplied')?.remove(); // remove old fake field if exists
            var positionDiv = document.querySelector('#jobApplicationForm');
            var info = document.createElement("p");
            info.id = "positionApplied";
            info.innerHTML = "<strong>Position Applied For:</strong> " + jobTitle;
            positionDiv.prepend(info);
        });
    }
});
</script>




{% endblock body %}